<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <title>Twiddler</title>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>

    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');

        var $name = $('<h1 class="name">Kiwi</h1>');
        $name.appendTo($body);

        var $username = $('<h2 class="username">@KiwiTheWeenie</h1>');
        $username.appendTo($body);

        var $refreshButton = $('<button id="new-tweets">New Tweets</button>');
        $refreshButton.appendTo($body);

        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $(`<div class="tweet" id="${tweet.user}"></div>`);
          $tweet.text(`@${tweet.user}: ${tweet.message} ${tweet.created_at}`);
          $tweet.appendTo($body);
          index -= 1;
        };

        var $backButton = $('<button id="back-button">Back To Feed</button>');
        $backButton.appendTo($body).hide();

        $refreshButton.on("click", function(){
          $(".tweet").remove();
          var index = streams.home.length - 1;
          while(index >= streams.home.length - 10){
            var tweet = streams.home[index];
            var $tweet = $(`<div class="tweet" id="${tweet.user}"></div>`);
            $tweet.text(`@${tweet.user}: ${tweet.message} ${tweet.created_at}`);
            $tweet.appendTo($body);
            index -= 1;
          }
        });

        $('.tweet').each(function(){
          $(this).on("click", function(e){
            $("#new-tweets").hide();
            $('.tweet').not(`#${e.target.id}`).hide();
            $backButton.show();
          });
        });

        $backButton.on("click", function(){

        })
      });

    </script>
  </body>
</html>
